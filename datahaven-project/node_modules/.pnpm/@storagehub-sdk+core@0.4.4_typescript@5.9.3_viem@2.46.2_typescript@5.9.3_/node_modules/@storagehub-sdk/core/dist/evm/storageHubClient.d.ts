/**
 * StorageHubClient - Unified EVM client for StorageHub blockchain
 *
 * Provides ergonomic read/write methods for StorageHub precompiles using viem.
 * Handles gas estimation automatically with Frontier-optimized defaults.
 *
 * All arguments are strongly typed. String data (names, paths) are passed as strings and encoded internally.
 * Binary data (signatures) are passed as Uint8Array. Hex values are 0x-prefixed strings (32-byte IDs).
 */
import { filesystemAbi } from "../abi/filesystem";
import type { FileInfo } from "../types";
import type { EvmWriteOptions, StorageHubClientOptions } from "./types";
import { type ReplicationLevel } from "./types";
import { type Address } from "viem";
export { filesystemAbi };
/**
 * Default precompile address for FileSystem on StorageHub runtimes.
 * If a chain uses a different address, this constant should be updated accordingly.
 */
export declare const SH_FILE_SYSTEM_PRECOMPILE_ADDRESS: Address;
export declare class StorageHubClient {
    private readonly publicClient;
    private readonly walletClient;
    private readonly filesystemContractAddress;
    private static readonly MAX_BUCKET_NAME_BYTES;
    private static readonly MAX_LOCATION_BYTES;
    private static readonly MAX_PEER_ID_BYTES;
    private static readonly DEFAULT_GAS_MULTIPLIER;
    /**
     * Get write contract instance bound to the wallet client.
     *
     * @returns Contract instance for write operations (transactions)
     */
    private getWriteContract;
    /**
     * Get read contract instance bound to the public client.
     *
     * @returns Contract instance for read operations (view calls)
     */
    private getReadContract;
    /**
     * Reusable gas estimation for any contract method.
     *
     * Uses internal PublicClient for reliable estimation on Frontier chains.
     * Applies safety multiplier to handle weightâ†’gas conversion issues.
     *
     * @param functionName - Contract method name
     * @param args - Method arguments
     * @param options - Gas overrides (explicit gas, multiplier, etc.)
     * @returns Estimated gas limit with safety multiplier applied
     */
    private estimateGas;
    /**
     * Build transaction options with gas and fee settings.
     *
     *
     * Note: `chain: null` is set to ensure compatibility with wallet clients that don't
     * properly expose chain information (e.g., Reown's Social Login). This tells viem
     * to use the wallet's currently selected chain rather than trying to fetch chainId.
     */
    private buildTxOptions;
    /**
     * Builds EIP-1559 gas fee.
     *
     * Strategy:
     * - Reads the `baseFeePerGas` from the latest block (EIP-1559 required).
     * - Sets a congestion-aware tip (`maxPriorityFeePerGas`).
     * - Computes `maxFeePerGas` as:
     *
     *      maxFeePerGas = baseFeePerGas * 3 + maxPriorityFeePerGas
     *
     * The 3x multiplier provides protection against short-term base fee spikes
     * while avoiding excessive overpayment during normal conditions.
     *
     */
    private buildEip1559FeeOptions;
    /**
     * Validate string length in UTF-8 bytes and convert to hex.
     * @param str - Input string to validate and encode
     * @param maxBytes - Maximum allowed byte length
     * @param label - Label for error messages
     * @returns 0x-prefixed hex string
     */
    private validateStringLength;
    /**
     * Assert that a value is present (non-null and non-undefined).
     */
    private assertPresent;
    /**
     * Serialize FileOperationIntention and sign it
     */
    private signIntention;
    /**
     * Create a StorageHub client with automatic gas estimation.
     *
     * @param opts.rpcUrl - RPC endpoint URL for the StorageHub chain
     * @param opts.chain - Viem chain configuration
     * @param opts.walletClient - Wallet client for transaction signing
     * @param opts.filesystemContractAddress - Filesystem precompile address
     */
    constructor(opts: StorageHubClientOptions);
    /**
     * Derive a bucket ID deterministically from owner + name.
     * @param owner - EVM address of the bucket owner
     * @param name - bucket name as string (max 100 UTF-8 bytes)
     * @returns bucketId as 0x-prefixed 32-byte hex
     */
    deriveBucketId(owner: Address, name: string): Promise<unknown> | undefined;
    /**
     * Get how many file deletion requests a user currently has pending.
     * @param user - user EVM address
     * @returns count as number
     */
    getPendingFileDeletionRequestsCount(user: Address): Promise<unknown> | undefined;
    /**
     * Create a new bucket.
     * @param mspId - 32-byte MSP ID (0x-prefixed hex)
     * @param name - bucket name as string (max 100 UTF-8 bytes)
     * @param isPrivate - true for private bucket
     * @param valuePropId - 32-byte value proposition ID (0x-prefixed hex)
     * @param options - optional gas and fee overrides
     */
    createBucket(mspId: `0x${string}`, name: string, isPrivate: boolean, valuePropId: `0x${string}`, options?: EvmWriteOptions): Promise<`0x${string}` | undefined>;
    /**
     * Request moving a bucket to a new MSP/value proposition.
     * @param bucketId - 32-byte bucket ID
     * @param newMspId - 32-byte new MSP ID
     * @param newValuePropId - 32-byte new value proposition ID
     * @param options - optional gas and fee overrides
     */
    requestMoveBucket(bucketId: `0x${string}`, newMspId: `0x${string}`, newValuePropId: `0x${string}`, options?: EvmWriteOptions): Promise<`0x${string}` | undefined>;
    /**
     * Update bucket privacy flag.
     * @param bucketId - 32-byte bucket ID
     * @param isPrivate - true for private
     * @param options - optional gas and fee overrides
     */
    updateBucketPrivacy(bucketId: `0x${string}`, isPrivate: boolean, options?: EvmWriteOptions): Promise<`0x${string}` | undefined>;
    /**
     * Create and associate a collection with a bucket.
     * @param bucketId - 32-byte bucket ID
     * @param options - optional gas and fee overrides
     */
    createAndAssociateCollectionWithBucket(bucketId: `0x${string}`, options?: EvmWriteOptions): Promise<`0x${string}` | undefined>;
    /**
     * Delete an empty bucket.
     * @param bucketId - 32-byte bucket ID
     * @param options - optional gas and fee overrides
     */
    deleteBucket(bucketId: `0x${string}`, options?: EvmWriteOptions): Promise<`0x${string}` | undefined>;
    /**
     * Issue a storage request for a file.
     * @param bucketId - 32-byte bucket ID
     * @param location - file path as string (max 512 UTF-8 bytes)
     * @param fingerprint - 32-byte file fingerprint
     * @param size - file size as bigint (storage units)
     * @param mspId - 32-byte MSP ID
     * @param peerIds - array of peer ID strings (max 5 entries, each max 100 UTF-8 bytes)
     * @param replicationLevel - replication level
     * @param replicas - number of replicas (only required for ReplicationLevel.Custom)
     * @param options - optional gas and fee overrides
     */
    issueStorageRequest(bucketId: `0x${string}`, location: string, fingerprint: `0x${string}`, size: bigint, mspId: `0x${string}`, peerIds: string[], replicationLevel: ReplicationLevel, replicas: number, options?: EvmWriteOptions): Promise<`0x${string}` | undefined>;
    /**
     * Revoke a pending storage request by file key.
     * @param fileKey - 32-byte file key
     * @param options - optional gas and fee overrides
     */
    revokeStorageRequest(fileKey: `0x${string}`, options?: EvmWriteOptions): Promise<`0x${string}` | undefined>;
    /**
     * Request deletion of a file from the network.
     * @param fileInfo File information containing all required data
     * @param options Optional transaction options
     * @returns Transaction hash
     */
    requestDeleteFile(fileInfo: FileInfo, options?: EvmWriteOptions): Promise<`0x${string}`>;
}
